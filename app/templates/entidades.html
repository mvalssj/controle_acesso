{% extends 'header.html' %}

{% block title %}Entidades{% endblock %}
{% block content %}

<div class="container">
    <div class="m-3">
        <button type="button" class="apple-button" data-toggle="modal" data-target="#novaEntidadeModal">Novo Usuário</button>
    </div>

    <div class="container p-3 apple-border apple-table">

        <table id="entidadesTable" class="table table-striped table-bordered" style="width: 100%;">
            <thead>
                <tr>
                    <th hidden>ID</th>
                    <th>Nome</th>
                    <!-- <th>Natureza</th> -->
                    <th>Tipo</th>
                    <th>Ativo</th>
                    <th>Data de Cadastro</th>
                    <th>Data de Modificação</th>
                </tr>
            </thead>
            <tbody>
                {% for entidade in entidades %}
                <tr data-toggle="modal" data-target="#entidadeModal"
                    data-id="{{ entidade.id }}"
                    data-nome="{{ entidade.nome }}"
                    data-natureza="{{ entidade.natureza }}"
                    data-tipo-colaborador="{{ entidade.colaborador }}"
                    data-tipo-terceiro="{{ entidade.terceiro }}"
                    data-ativo="{{ entidade.ativo }}"
                    data-email="{{ entidade.email }}"
                    data-data_cadastro="{{ entidade.created_at }}"
                    data-data_modificacao="{{ entidade.updated_at }}">
                    <td hidden>{{ entidade.id }}</td>
                    <td>{{ entidade.nome }}</td>
                    <!-- <td>{{ entidade.natureza }}</td> -->
                    <td id="tipo-{{ entidade.id }}"></td> <!-- Coluna Tipo -->
                    <td>{{ entidade.ativo }}</td>
                    <td>{{ entidade.created_at }}</td>
                    <td>{{ entidade.updated_at }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% include 'footer.html' %}

<!-- Modal Editar -->
<div class="modal fade" id="entidadeModal" tabindex="-1" role="dialog" aria-labelledby="entidadeModalLabel" aria-hidden="true" style="z-index: 10001;">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="entidadeModalLabel">Editar Usuário</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <input type="hidden" id="id">
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="nome">Nome:</label>
                            <input type="text" class="form-control" id="nome">
                        </div>
                        <!-- <div class="form-group col-md-6">
                            <label for="natureza">Natureza:</label>
                            <select class="form-control" id="natureza">
                                <option value="pessoa_fisica">Pessoa Física</option>
                                <option value="pessoa_juridica">Pessoa Jurídica</option>
                            </select>
                        </div> -->
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="tipo">Tipo:</label>
                            <select class="form-control" id="tipo">
                                <option value="colaborador">Colaborador</option>
                                <option value="terceiro">Terceiro</option>
                                <option value="nenhum">Nenhum</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="ativo">Ativo:</label>
                            <select class="form-control" id="ativo">
                                <option value="1">Sim</option>
                                <option value="0">Não</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="email">Email:</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="senha">Senha:</label>
                            <input type="password" class="form-control" id="senha">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" id="editarEntidadeBtn">Salvar</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal para nova entidade -->
<div class="modal fade" id="novaEntidadeModal" tabindex="-1" role="dialog" aria-labelledby="novaEntidadeModalLabel" aria-hidden="true" style="z-index: 10001;">
    <div class="modal-dialog modal-xl modal-dialog-centered" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="novaEntidadeModalLabel">Novo Usuário</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <form>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="nome">Nome:</label>
                            <input type="text" class="form-control" id="nome">
                        </div>
                        <!-- <div class="form-group col-md-6">
                            <label for="natureza">Natureza:</label>
                            <select class="form-control" id="natureza">
                                <option value="pessoa_fisica">Pessoa Física</option>
                                <option value="pessoa_juridica">Pessoa Jurídica</option>
                            </select>
                        </div> -->
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-6">
                            <label for="tipo">Tipo:</label>
                            <select class="form-control" id="tipo">
                                <option value="colaborador">Colaborador</option>
                                <option value="terceiro">Terceiro</option>
                                <option value="nenhum">Nenhum</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="ativo">Ativo:</label>
                            <select class="form-control" id="ativo">
                                <option value="1">Sim</option>
                                <option value="0">Não</option>
                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <label for="email">Email:</label>
                            <input type="email" class="form-control" id="email">
                        </div>
                        <div class="form-group col-md-6">
                            <label for="senha">Senha:</label>
                            <input type="password" class="form-control" id="senha">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Fechar</button>
                <button type="button" class="btn btn-primary" id="salvarNovaEntidadeBtn">Salvar</button>
            </div>
        </div>
    </div>
</div>
{% endblock %}